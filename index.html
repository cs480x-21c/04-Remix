<html>
    <head>
        <script src="//d3js.org/d3.v3.min.js"></script>
        <title>Assignment 4 - Remix</title>
        <meta charset="utf-8">
        <style>
        .background path {
            fill: none;
            stroke: #ddd;
            shape-rendering: crispEdges;
        }
        .foreground path {
        fill: none;
        stroke: steelblue;
        }
        .axis line,
        .axis path {
        fill: none;
        stroke: #000;
        shape-rendering: crispEdges;
        }
        .axis text {
        text-shadow: 0 1px 0 #fff, 1px 0 0 #fff, 0 -1px 0 #fff, -1px 0 0 #fff;
        cursor: move;
        }
        </style>
    </head>
    <body>
        <div id="charts">
            <div id="teamCompare"></div>
            <div id="teamInspect"></div>
        </div>
        <div id="teamSelector"></div>
        <script>
            d3.select("#charts")
                .style("display","flex")
                .style("width", "100vw")
                .style("height", "70vh");
            var comparisons = d3.select("#teamCompare")
                .style("width","50vw")
                .style("height","70vh");
            var inspections = d3.select("#teamInspect")
                .style("width","50vw")
                .style("height","70vh")
                .style("background-color","blue");
            var selections = d3.select("#teamSelector")
                .style("width", "100vw")
                .style("height","30vh")
                .style("background-color","green");
            var divHeights = document.getElementById('teamCompare').clientHeight;
            var divWidths = document.getElementById('teamCompare').clientWidth;
            var margin = {top: 30, right: 20, bottom: 10, left: 20};
            var width = (divWidths) - margin.left - margin.right;
            var height = (divHeights/1.75) - margin.top - margin.bottom;
            var x = d3.scale.ordinal().rangePoints([0, width], 1)
            var y = {};
            var dragging = {};
            var line = d3.svg.line();
            var axis = d3.svg.axis().orient("left"), background, foreground;
            // Building team comparisons parallel coordinate graph
            // Axes: Expected Goals from team, actual goals from team, expected goals against team, actual goals against team    
            var teamsvg = d3.select("#teamCompare").append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
            // Returns the path for a given data point.
            function path(d) {
                return line(dimensions.map(function(p) { return [x(p), y[p](d[p])]; }));
            }
            d3.csv("teamdata.csv", function(teamData) {
                x.domain(dimensions = d3.keys(teamData[0]).filter(function(d) {
                    return d != "team" && (y[d] = d3.scale.linear()
                        .domain(d3.extent(teamData, function(p) { return +p[d]; }))
                        .range([height, 0]));
                }));

                // background = svg.append("g")
                //         .attr("class", "background")
                //     .selectAll("path")
                //         .data(teamData)
                //     .enter().append("path")
                //         .attr("d", path);

                foreground = teamsvg.append("g")
                        .attr("class", "foreground")
                    .selectAll("path")
                        .data(teamData)
                    .enter().append("path")
                        .attr("d", path);
                // Add group element for each dimension
                var g = teamsvg.selectAll(".dimension")
                        .data(dimensions)
                    .enter().append("g")
                        .attr("class", "dimension")
                        .attr("transform", function(d){ return "translate(" + x(d) + ")"; });
                // Adding axis and title
                g.append("g")
                        .attr("class", "axis")
                        .each(function(d) { d3.select(this).call(axis.scale(y[d])); })
                    .append("text")
                        .style("text-anchor", "middle")
                        .attr("y", -9)
                        .text(function(d) {return d; });
            });
        </script>
    </body>
</html>